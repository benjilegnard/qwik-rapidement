<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<link rel="icon" type="image/svg+xml" href="./src/assets/favicon.svg" />
		<link rel="stylesheet" href="./node_modules/reveal.js/dist/reveal.css" />
		<link rel="stylesheet" href="./src/theme/onepoint.scss" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Qwik, rapidement</title>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>Qwik, rapidement</h1>
				</section>
				<section>
					<section>
						<h2>Qwik</h2>
						<img
							src="/assets/qwik-logo.svg"
							alt="Qwik logo"
							style="width: 400px; height: 400px"
						/>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>Welcome, ice breaker etc...</li>
								<li>Qui a déjà entendu parler de Qwik ?</li>
								<li>Qui a lu la doc de Qwik ?</li>
								<li>
									Qui est là pour garder la place avant keynote de fermeture ?
								</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Qwik, historique</h3>
						<table class="fragment">
							<tr>
								<td>
									<img
										src="/assets/misko-hevery.jpg"
										alt="Misko Hevery's profile pictu1.re"
										class="round"
									/>
								</td>
								<td>
									<ul>
										<li>Créé par Misko Hevery</li>
										<li>Open-sourced fin 2021</li>
										<li class="fragment">Backé par builder.io</li>
										<li class="fragment">https://qwik.builder.io</li>
									</ul>
								</td>
							</tr>
						</table>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>Misko créateur d'angularJS, co-créateur d'angular 2</li>
								<li>Sorti en béta finale le 19 septembre 2022</li>
								<li>Builder.io: (Partytown / Mitosis / Figma&lt;-&gt;HTML)</li>
								<li>Co créateurs de Stencil (Manu almeida / Adam bradley)</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Qwik, une promesse</h3>
						<img
							src="/assets/lighthouse-100.webp"
							style="width: 500px"
							alt="performance score"
						/>
						<ul>
							<li>Temps de chargement &lt; 1s</li>
							<li>Pas d'Hydratation</li>
							<li>HTML First, "zero JS"</li>
							<li>Time to Interactive de folie</li>
						</ul>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>En vrai c'est plutôt moins d'1k de JS</li>
								<li>Qwik nous promet des performances folle car très peu de JS</li>
								<li>On va donc voir comment ça marche et pourquoi.</li>
								<li>Générique.</li>
							</ul>
						</aside>
					</section>
				</section>
				<section>
					<h2>Benjamin Legrand</h2>
					<table>
						<tr>
							<td>
								<img
									src="/assets/benjamin-legrand.png"
									alt="Benjamin Legrand's profile picture"
									class="round"
									style="width: 400px; height: 400px"
								/>
							</td>
							<td>
								<ul>
									<li>Tech lead @ Onepoint</li>
									<li>Angular fanboy</li>
									<li>Typescript addict</li>
									<li>@benjilegnard</li>
								</ul>
							</td>
						</tr>
					</table>
				</section>
				<section>
					<section>
						<h3>Savoir d'où l'on vient</h3>
						<table>
							<thead>
								<tr>
									<th>1st gen</th>
									<th>2nd gen</th>
									<th>3rd gen</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td></td>
									<td></td>
									<td></td>
								</tr>
							</tbody>
						</table>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>
									Qwik fait partie de ce qu'on peut appeler une 4e génération de
									frameworks JS
								</li>
								<li>
									gen 1 : ruby / PHP + jquery / JS uniquement pour certains
									éléments.
								</li>
								<li>
									gen 2 : shift mental sur les single page application,
									backbone, angular, react, svelte, etc...
								</li>
								<li>
									gen 3 : resumable frameworks + islands, fresh, astro.build
								</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>SPA, Single Page Application</h3>
						<!-- TODO, maybe google trend graphs -->
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>Historiquement page -> server</li>
								<li>Certaines app déjà dans les années 1990</li>
								<li>GMail, AngularJS</li>
							</ul>
						</aside>
					</section>
					<section>
						<h4>Qu'attends-on d'un framework "SPA" ?</h4>
						<ul>
							<li>URL-based routing (#/hash)</li>
							<li>Client Side Rendering</li>
							<li>Component-based</li>
						</ul>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>rendre la donnée,</li>
								<li>template HTML,</li>
								<li>arbre de composant</li>
							</ul>
						</aside>
					</section>
					<section>
						<h4>1er problème :</h4>
						<!-- todo loading wheel + page vide -->
						<table role="presentation">
							<tr>
								<td></td>
								<td></td>
							</tr>
							<tr>
								<td></td>
								<td></td>
							</tr>
						</table>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>On dépends énormément du JS à cause du CSR</li>
								<li>Tant qu'on a pas tout le JS</li>
								<li>technique shadow éléments etc...</li>
								<li>C'est un problème parce que web vitals</li>
							</ul>
						</aside>
					</section>
					<section>
						<h4>2e problème :</h4>
						<p>Core Web vitals</p>
						<ul>
							<li><b>LCP</b>: rapidité d'affichage</li>
							<li><b>FID/TTI</b>: interactivité</li>
							<li><b>CLS</b>: stabilité visuelle</li>
						</ul>
						<aside class="notes" aria-label="Notes">
							<p>Depuis 2020, pris en compte par le pagerank google</p>
							<ul>
								<li>Largest Contenful Paint: rapidité d'affichage</li>
								<li>
									First input delay/TTI: rapidité de chargement / utilisabilité
								</li>
								<li>Content Layout Shift OSEF</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Une solution</h3>
						<ul>
							<li class="fragment">Server-Side-Rendering</li>
							<li class="fragment">
								Javascript IsoMorphe / Universal (node.js)
							</li>
							<li class="fragment">
								Nouveau problème: réconcilier serveur et client
							</li>
						</ul>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>Utiliser le même framework SPA coté serveur</li>
								<li></li>
								<li>Re-connecter les deux</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Frameworks SPA & their SSR solutions</h3>
						<table>
							<thead>
								<tr>
									<th>Framework</th>
									<th>/ SSR Solution</th>
								</tr>
							</thead>
							<tr>
								<td>React</td>
								<td>Next.js</td>
							</tr>
							<tr>
								<td>Vue</td>
								<td>Nuxt</td>
							</tr>
							<tr>
								<td>angular</td>
								<td>@nguniversal</td>
							</tr>
							<tr>
								<td>Ember.js</td>
								<td>Fastboost</td>
							</tr>
						</table>
						<aside class="notes" aria-label="Notes">
							J'ai mis Ember pour troller Tout ces frameworks ont le même
							problème : la réhydratation.
						</aside>
					</section>
				</section>
				<section>
					<section>
						<h2>L'Hydratation</h2>
						<p>qu'est ce que c'est ?</p>
						<ul>
							<li class="fragment"><del>boire de l'eau</del></li>
							<li class="fragment">
								Re-connecter le HTML généré par le serveur avec le javascript du
								client
							</li>
							<li class="fragment">
								re-construire l'arbre de composant, re-connecter les events
								listener
							</li>
							<li class="fragment">
								on dépends toujours du JS => Time to interactive pas bon
							</li>
						</ul>
					</section>
					<section>
						<h2><u>Hydratation</u> vs résumabilité</h2>
						<img src="/assets/hydrate-vs-resume.drawio.svg" />
					</section>
					<section>
						<h2>Hydratation vs <u>résumabilité</u></h2>
						<img src="/assets/resume.drawio.svg" />
					</section>
					<section>
						<h2>La résumabilité</h2>
						<!-- TODO https://qwik.builder.io/docs/concepts/resumable -->
						<ul>
							<li class="fragment">
								Les écouteurs d'évènement sont "sérializés"
							</li>
							<li>Pas de téléchargement de JS, on est déjà prêt.</li>
							<li>
								<pre>
									<code class="fragment hljs" data-trim>
										<script type="text/template">
											<button onClickQrl="./chunk.js#handler_symbol">click me</button>
										</script>
									</code>
								</pre>
							</li>
						</ul>
					</section>
				</section>
				<!--
					INTERNALS OF THE FRAMEWORK
				-->
				<section>
					<section>
						<h3>Qwik: Principes de base</h3>
						<ul>
							<li>Retarder le plus possible l'exécution du JS</li>
							<li>Sérialiser le plus de choses dans le DOM</li>
						</ul>
					</section>
					<section data-auto-animate>
						<h3 data-id="code-title">le QwikLoader</h3>
						<pre data-id="code-animation">
							<code class="hljs" language="html" data-trim data-line-numbers="|4|3|2">
								<script type="text/template">
									<html>
										<body q:base="/build/">
											<button onClickQrl="./myHandler.js#clickHandler">push me</button>
											<script>/* Qwikloader */<script>
										</body>
									</html>
								</script>
							</code>
						</pre>
						<aside class="notes" aria-label="Notes">
							Qwikloader is: small: 1 kb minified. fast: 5ms delivered inline in
							the dom GOAL:
							<ul>
								<li>register global browser events.</li>
								<li>
									if an event occurs, search the DOM for the corresponding event
									attribute pointing to the QRL to lazy-load.
								</li>
								<li>Lazy-load the event handler and execute it.</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Automagic bundle splitting / $</h3>
						<pre>
							<code class="hljs language-typescript" language="typescript" data-trim data-id="code-animation">
								<script type="text/template">
									export const Counter = component$(() => {
										const state = useStore({
											count: 0,
										});
										return (
											<Host>
												<div>Value is: ${state.count}</div>
												<button onClick$={() => state.count++}>Increment</button>
											</Host>
										);
									});
								</script>
							</code>
						</pre>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>
									Qwik s'occupe tout seul de découper votre code en chunk js.
								</li>
								<li>
									Ici on va se retrouver avec trois chunk.
								</li>
							</ul>
						</aside>
					</section>
					<section>
						<h2>The optimizer</h2>
						<ul>
							<li>Basé sur [Vite](https://vitejs.dev/)</li>
							<li>esbuild</li>
							<li>knows about your code</li>
						</ul>
					</section>
					<!-- TODO more slide on the optimizer -->
					<section>
						<h2>Serialisation</h2>
						<p>q:obj</p>
					</section>
					<!-- TODO more slide on serialization -->
				</section>
				<!--
					Features deep dive
				-->
				<section>
					<section>
						<h2>Features</h2>
						<ul>
							<li>Aventurons nous plus loin</li>
							<li>Dans la jungle des fonctionnalités</li>
						</ul>
					</section>
					<section>
						<h3>Component / $syntax</h3>
						<pre>
							<code class="hljs language-typescript" language="typescript" data-trim data-id="code-animation">
								<script type="text/template">
									export const Counter = component$(() => {
										const state = useStore({
											count: 0,
										});
										return (
											<Host>
												<div>Value is: ${state.count}</div>
												<button onClick$={() => state.count++}>Increment</button>
											</Host>
										);
									});
								</script>
							</code>
						</pre>
						<aside class="notes" aria-label="Notes">
							Qwik est component-based, sur du JSX JSX => mélanger du XML dans
							du JS. - très proche de React dans l'idée
						</aside>
					</section>
					<section>
						<h3>React equivalent</h3>
						<pre>
						<code class="hljs language-typescript" data-trim>
							<script type="text/template">
								export function Counter() {
									const [count, setCount] = useState(0);
									return (
										<>
										<div>
											Value is: ${count}
										</div>
										<button onClick$={() => setCount(count + 1)}>
											Increment
										</button>
										</>
									)
								}
							</script>
						</code>
						</pre>
					</section>
					<section>
						<h3>Feature: transclusion</h3>
						<pre>
							<!-- todo show slot example -->
						<code class="hljs language-typescript" data-trim>
							<script type="text/template">
								export function Counter() {
									const [count, setCount] = useState(0);
									return (
										<>
										<div>
											Value is: ${count}
										</div>
										<button onClick$={() => setCount(count + 1)}>
											Increment
										</button>
										</>
									)
								}
							</script>
						</code>
						</pre>
					</section>
					<section>
						<h3>Feature: hooks / useState</h3>
						<ul>
							<li>styles scopés aux composants</li>
						</ul>
					</section>
					<section>
						<h3>Feature: async rendering</h3>
						<ul>
							<li>styles scopés aux composants</li>
						</ul>
					</section>
					<section>
						<h2>Feature: Scoped styles</h2>
						<ul>
							<li>useStyles()</li>
							<li>contextualisés par composant</li>
						</ul>
						<aside class="notes" aria-label="Notes">
							à noter principalement que Qwik fournit une solution native de
							CSS-in-JS Pas besoin d'en rajouter une, pas de question à se
							poser, c'est géré par le build
						</aside>
					</section>
					<section>
						<h2>Feature: Client / Server</h2>
						<ul>
							<li>api fetch()</li>
							<li>node-fetch polyfill</li>
						</ul>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>OK</li>
							</ul>
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h2>Qwik city</h2>
						<ul>
							<li>Meta-framework</li>
							<li>page based routing (MDX)</li>
						</ul>
						<aside class="notes" aria-label="Notes">
							Comme React => library d'affichage only Qwik city => super powers.
						</aside>
					</section>
					<section>
						<h3>Page-based routing</h3>
						<!-- todo explain page based routing-->
						<pre>
							| index.mdx
							| -> /product/[slug].mdx
							| -> /user/[id].mdx
						</pre
						>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>OK</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>&lt;head&gt; management</h3>
						<!-- todo explain head-->
					</section>
				</section>
				<section>
					<section>
						<h2>Conclusion</h2>
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>OK</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Feature comparution matrix</h3>
					</section>
					<section>
						<h2>Go further / other solutions</h2>
						<ul>
							<li>Fresh (deno)</li>
							<li>Marko</li>
							<li>Astro .build</li>
						</ul>
					</section>
					<section>
						<h3>How do i use it on my project?</h3>
						<ul>
							<li>qwikify</li>
							<li></li>
							<li></li>
						</ul>
					</section>
					<section>
						<h3>Perf</h3>
						<!-- TODO meme of the buses -->
						<aside class="notes" aria-label="Notes">
							<ul>
								<li>Description: C'est un petit bus sur lequel est marqué</li>
								<li>
									La performance, comme l'accessibilité, c'est l'affaire de tous
								</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Questions ?</h3>
					</section>
				</section>
			</div>
		</div>
		<script type="module" src="./src/index.ts"></script>
	</body>
</html>
